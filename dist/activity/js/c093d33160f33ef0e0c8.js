!function(t){var e={};function i(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(o,a,function(e){return t[e]}.bind(null,a));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){i(1),i(2),i(3),t.exports=i(4)},function(t,e){var i,o,a,n,s,c,r;a="https://act.zhaoliangji.com",n="https://product.zhaoliangji.com",s=!1,c={propKeyword:{}},r={},new Vue({el:"#app",data:{screenHeight:0,isShowPage:!1,floatData:[],floatTime:"",floatStatus:!1,floatIndex:0,total:0,countTimedate:{d:0,h:0,m:0,s:0,ms:9},deadline:!1,isShowConpon:!1,isReceiveRedStatus:!1,fqlData:"",listQuery:{page:1,prop_str:"",price_sort:0,price_range:"",only_onsale:0,tag_id:0},detailData:"",searchBox:!1,isLoad:!1,productData:[],sortData:{},sortItem:{index:0,name:"全部"},isFull:!1,tabHeight:0,isFixed:!1,isHideTop:!0,activityId:"",sk:"",gid:"",price:"",priceTemp:"",priceList:[],priceListStatus:{},priceSelectVal:"",priceSelectIndex:"",firstPrice:"",lastPrice:"",selectData:{},shaixuanLabel:{},shaixuanLabelLength:0,totalNum:0,selectedLabel:{},selectedLabelTemp:{},selectedLabelLength:0,propKey:{8:"network",9:"version",10:"color",11:"memrory",12:"percentage",14:"ppi",16:"SIM",23:"system_version"}},watch:{firstPrice(t){this.priceSelectIndex="",this.bindPrice()},lastPrice(t){this.priceSelectIndex="",this.bindPrice()}},created(){var t=this;this.activityId=this.getQueryString("activity_id"),this.sk=this.getQueryString("sk"),this.gid=this.getQueryString("gid"),this.getPriceList(),this.getSelectData(),this.isAPP()?this.appMethods():this.getDetailData(),zlj.on("onPageShow",(function(){t.enterEvent()})),this.screenHeight=window.screen.height},mounted(){clearTimeout(i),clearTimeout(o),this.tabControlHandle(),this.getProductData(),zlj.switchRefresh(!1)},methods:{enterEvent(){"miniprogram"===window.__wxjs_environment?this.eventPoint("enter_h5_act_page",{page_id:10049,activity_id:this.activityId,activity_name:document.title,channel_id:2}):(this.shencePoint("enter_activity_page",{activity_id:this.activityId,activity_name:document.title,event_type:"pageview"}),this.eventPoint("enter_h5_act_page",{page_id:10049,activity_id:this.activityId,activity_name:document.title,channel_id:1}))},getTabHeight(){var t=document.getElementById("tab-box");this.tabHeight=t.offsetHeight},appMethods(){var t=this;window.goLoginMsg=function(e){window.userData="string"==typeof e?JSON.parse(e):e,t.getDetailData()},window.goLoginOutMsg=e=>{t.getDetailData()},window.onPageShow=function(){}},isAPP(){let t=!1;return window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.goLogin?t=!0:window.control&&window.control.goLogin&&(t=!0),t},getFloatData(){var t=this,e={};t.floatTime&&(e.current_time=t.floatTime),axios.get("https://panda.huodao.hk/api/account/shaidan/get_float_data",{params:e}).then((function(e){var i=e.data;if(1==i.code){if(0==i.data.length)return;t.floatStatus=!0,t.floatData=i.data[t.floatIndex];var o=setInterval((function(){t.floatIndex++,t.floatIndex<=i.data.length?(t.floatData=i.data[t.floatIndex],t.floatStatus=!0,setTimeout((function(){t.floatStatus=!1}),1500)):(t.floatIndex=0,t.floatTime=i.data[t.floatIndex].buy_time,t.getFloatData(),clearInterval(o))}),6e4);setTimeout((function(){t.floatStatus=!1}),1500)}}))},getDetailData(){var t=this;axios.get(a+"/api/theme/activity_detail?activity_id="+t.activityId).then((function(e){var i=e.data;"1"===i.code&&(t.detailData=i.data,t.countTime(t.detailData.end_time),t.countTimeMs(),document.title=i.data.activity_title,zlj.changeTitle(i.data.activity_title),t.detailData.coupon_info&&(window.userData?t.isReceiveConpon(t.detailData.coupon_info.bonus_code):(t.isShowConpon=!0,t.isReceiveRedStatus=!1)),t.getFloatData(),t.enterEvent(),1==t.detailData.show_fenqi&&t.getFQLData(),t.$nextTick((function(){t.isShowPage=!0})))}))},isReceiveConpon(t){var e=this,i={};i.token=window.userData.token,i.bonus_code=t,axios.post(a+"/api/bonus/check_user_bonus_status",i).then((function(t){var i=t.data;"1"===i.code&&(1==i.data.status?e.isReceiveRedStatus=!0:e.isReceiveRedStatus=!1),e.isShowConpon=!0}))},receiveCoupon(){var t=this;if(!t.isReceiveRedStatus)if(window.userData&&window.userData.token){var e={};e.token=window.userData.token,e.bonus_code=t.detailData.coupon_info.bonus_code,e.activity_id=t.activityId,axios.post(a+"/api/bonus/draw_bonus",e).then((function(e){var i=e.data;"1"===i.code?(Modal({title:"提示",content:i.msg,cancelButton:!1,confirmText:"知道了"}),t.isReceiveRedStatus=!0,t.eventPoint("get_coupon",{page_id:10049,activity_id:t.activityId,activity_name:document.title,coupon_id:t.detailData.coupon_info.bonus_id,coupon_name:t.detailData.coupon_info.bonus_name,coupon_cost:t.detailData.coupon_info.bonus_amount,event_type:"click"})):-5==i.code?(Modal({title:"提示",content:i.msg,cancelButton:!1,confirmText:"知道了"}),t.isReceiveRedStatus=!1):Modal({title:"提示",content:i.msg,cancelButton:!1,confirmText:"知道了"})}))}else window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.goLogin?window.webkit.messageHandlers.goLogin.postMessage({}):window.control&&window.control.goLogin?window.control.goLogin():Modal({title:"提示",content:"请下载找靓机App",cancelButton:!1,confirmText:"知道了"})},getFQLData(){var t=this;axios.get(a+"/api/fenqi/get_fenqile_quota").then((function(e){var i=e.data;"1"===i.code&&(t.fqlData=i.data)}))},getFQLAttach(){window.userData&&window.userData.token?window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.getFQLQuota?this.gotoFql():window.control&&window.control.getFQLQuota?this.gotoFql():Modal({title:"提示",content:"请下载找靓机app",cancelButton:!1,confirmText:"知道了"}):window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.goLogin?window.webkit.messageHandlers.goLogin.postMessage({}):window.control&&window.control.goLogin?window.control.goLogin():Modal({title:"提示",content:"请下载找靓机app",cancelButton:!1,confirmText:"知道了"})},gotoFql(){var t={};t.token=window.userData.token,t.phone=window.userData.mobile,t.type=1,axios.get(a+"/api/fenqi/get_fenqile_attach",{params:t}).then((function(t){var e=t.data;if("1"===e.code){var i=e.data,o={agent:"1081565",redirectUri:i&&i.redirect_uri?i.redirect_uri:"",attach:i&&i.attach?JSON.stringify(i.attach):""};window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.getFQLQuota?window.webkit.messageHandlers.getFQLQuota.postMessage(o):window.control&&window.control.getFQLQuota&&window.control.getFQLQuota(JSON.stringify(o))}else Modal({title:"提示",content:e.msg,cancelButton:!1,confirmText:"知道了"})}))},countTime(t){var e,o,a,n,s=this,c=(new Date).getTime(),r=1e3*t-c;r>=0?(e=Math.floor(r/1e3/60/60/24),o=Math.floor(r/1e3/60/60%24),a=Math.floor(r/1e3/60%60),(n=Math.floor(r/1e3%60))<10&&(n="0"+n),a<10&&(a="0"+a),o<10&&(o="0"+o)):(e="0",o="00",a="00",n="00",s.countTimedate.ms="0",s.deadline=!0,clearTimeout(i)),s.countTimedate.d=e,s.countTimedate.h=o,s.countTimedate.m=a,s.countTimedate.s=n,s.deadline||(i=setTimeout((function(){s.countTime(t)}),1e3))},countTimeMs(){var t=this;t.deadline?clearTimeout(o):(t.countTimedate.ms?t.countTimedate.ms--:t.countTimedate.ms=9,o=setTimeout(t.countTimeMs,100))},changePrice(){if(this.listQuery.price_sort?"asc"===this.listQuery.price_sort?this.listQuery.price_sort="desc":"desc"===this.listQuery.price_sort&&(this.listQuery.price_sort=""):this.listQuery.price_sort="asc",this.isFull=!1,this.listQuery.page=1,this.listQuery.price_sort){var t={page_id:10049,operation_module:"价格",filter_content:{},event_type:"click",is_cancel:1};"asc"===this.listQuery.price_sort?t.filter_content.sort="降序":"desc"===this.listQuery.price_sort&&(t.filter_content.sort="升序"),t.filter_content=JSON.stringify(t.filter_content),this.shencePoint("click_filter_goods",t),this.eventPoint("click_filter_goods",t)}this.getProductData()},changeonlyOnsale(){this.isFull=!1,this.listQuery.page=1,0==this.listQuery.only_onsale?this.listQuery.only_onsale=1:this.listQuery.only_onsale=0,this.getProductData();var t={page_id:10049,operation_module:"是否在售",filter_content:{},event_type:"click"};0===this.listQuery.only_onsale?(t.filter_content.is_sale="不在售",t.is_cancel=0):1===this.listQuery.only_onsale&&(t.filter_content.is_sale="在售",t.is_cancel=1),t.filter_content=JSON.stringify(t.filter_content),this.shencePoint("click_filter_goods",t),this.eventPoint("click_filter_goods",t)},openSearch(){this.searchBox=!this.searchBox,document.body.classList.add("overflow-hidden")},hideSelectBox(){this.searchBox=!1,document.body.classList.remove("overflow-hidden"),event.preventDefault(),this.confirmSelect()},stopModal(){event.stopPropagation()},getPriceList(){var t=this;axios.get(n+"/api/product/filter_price").then((function(e){var i=e.data;"1"===i.code&&(t.priceList=i.data)}))},priceSelect(t){var e=this,i=t.currentTarget,o=(i.dataset.val,i.dataset.index);if(e.isLoad){o==e.priceSelectIndex?e.priceSelectIndex="":e.priceSelectIndex=o;var a="";e.priceSelectIndex?(a=e.priceList[e.priceSelectIndex-1],e.$set(e.selectedLabelTemp,"price",{price:a})):(delete e.selectedLabelTemp.price,a=""),s=!1,a&&-1==a.indexOf("-")?e.priceTemp=a.split("以")[0]+"-99999":e.priceTemp=a,e.firstPrice="",e.lastPrice=""}},bindPrice(){var t=this,e="";if(t.firstPrice||t.lastPrice){if(t.firstPrice&&t.lastPrice){if(!(Number(t.firstPrice)<=Number(t.lastPrice)))return void(s=!0);e=t.firstPrice+"-"+t.lastPrice}t.firstPrice&&!t.lastPrice&&(e=t.firstPrice+"以上"),!t.firstPrice&&t.lastPrice&&(e="0-"+t.lastPrice)}else e="";s=!1,e&&-1==e.indexOf("-")?t.priceTemp=e.split("以")[0]+"-99999":t.priceTemp=e},getSelectData(){var t=this,e={};e.type_id=t.detailData.type_id,e.brand_id=t.detailData.brand_id,e.model_id=t.detailData.model_id,axios.get(n+"/api/product/filter_attr",{params:e}).then((function(e){var i=e.data;"1"===i.code&&(t.selectData=i.data.main)}))},selectLabel(t){var e=this,i=t.currentTarget.dataset.pnid,o=t.currentTarget.dataset.pvid,a=t.currentTarget.dataset.pindex,n=t.currentTarget.dataset.index,s=t.currentTarget.dataset.name;if(e.isLoad)if(e.selectData[a].filter_data[n].isactive){delete c.propKeyword[o];for(var d=r[i],l=0;l<d.length;l++)d[l]==s&&(r[i].splice(l,1),0==r[i].length&&delete r[i]);e.$set(e.selectData[a].filter_data[n],"isactive",!1)}else c.propKeyword[o]=i+":"+o,e.$set(e.selectData[a].filter_data[n],"isactive",!0),r[i]||(r[i]=[]),r[i].push(s)},confirmSelect(){var t=this;if(s)Modal({title:"请输入正确的价格区间",content:data.msg,cancelButton:!1,confirmText:"知道了"});else{var e=[];for(var i in c.propKeyword)e.push(c.propKeyword[i]);t.detailData.model_id&&e.length>0&&e.unshift("5:"+t.detailData.model_id),t.searchBox=!1,t.$set(t.listQuery,"prop_str",e.join(";")),t.$set(t.listQuery,"page",1),t.$set(t.listQuery,"price_range",t.priceTemp),t.shaixuanLabelLength=Object.keys(r).length,t.getProductData();var o={page_id:10049,operation_module:"筛选",filter_content:{},event_type:"click"};for(var i in r)this.propKey[i]&&(o.filter_content[this.propKey[i]]=r[i]);o.filter_content.price=t.priceTemp,o.filter_content=JSON.stringify(o.filter_content),t.price=t.priceTemp,this.shencePoint("click_filter_goods",o),this.eventPoint("click_filter_goods",o),document.body.classList.remove("overflow-hidden")}},cancelSelect(t){var e=this;t&&t.currentTarget.dataset.type,e.selectData.length>0&&e.selectData.map((function(t,i){t.filter_data.map((function(t,o){e.$set(e.selectData[i].filter_data[o],"isactive",!1)}))})),c.propKeyword={},r={},e.shaixuanLabelLength=0,e.priceSelectIndex="",e.firstPrice="",e.lastPrice="",e.priceTemp="",e.price="",e.$set(e.listQuery,"page",1),e.$set(e.listQuery,"prop_str",""),e.$set(e.listQuery,"price_range",""),e.getProductData()},changeSort(t){this.sortItem=t,this.isFull=!1,this.$set(this.listQuery,"page",1),this.$set(this.listQuery,"tag_id",t.id);var e=document.getElementById("tag-"+(t.index-1)),i=0;e&&(i=e.offsetLeft),document.getElementById("act-classification").scrollLeft=i,this.getProductData()},getProductData(){var t=this,e=Object.assign({},t.listQuery);e.activity_id=t.activityId,t.isLoad=!1,axios.get(n+"/api/activity/activity_detail_product_list",{params:e}).then((function(i){var o=i.data;"1"===o.code&&(1==e.page?(t.total=o.data.onsale_count,t.sortData=o.data.tag_list,t.sortData[0]="全部",t.productData=o.data.product_list,t.$nextTick((function(){t.getTabHeight()}))):t.productData.push.apply(t.productData,o.data.product_list),0==o.data.has_next_page&&(t.isFull=!0),t.isLoad=!0)}))},goToDetail(t,e){if(1==t.product_status){var i={pid:t.product_id,pic:t.main_pic,sk:"7-"+this.activityId};this.sk&&(i.sk=this.sk);var o={page_id:10049,channel_id:1,event_type:"click",activity_id:this.activityId,activity_name:document.title,goods_id:t.product_id,goods_name:t.product_name,goods_devices_id:t.imei,goods_price:t.price,goods_origin_price:t.ori_price,is_promotion:!1,click_title:this.sortItem.index+1+"~"+this.sortItem.name,click_index:Number(e)+1},a={event_type:"click",activity_id:this.activityId,activity_name:document.title,goods_id:t.product_id,goods_name:t.product_name,is_promotion:!1,operation_index:Number(e)+1,business_type:5};window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.gotoPage?(this.eventPoint("click_enter_goods_details",o),this.shencePoint("click_enter_goods_details",a),window.webkit.messageHandlers.gotoPage.postMessage(i)):window.control&&window.control.gotoPage?(this.eventPoint("click_enter_goods_details",o),this.shencePoint("click_enter_goods_details",a),window.control.gotoPage(JSON.stringify(i))):"miniprogram"===window.__wxjs_environment?wx.miniProgram.navigateTo({url:"../commodity-detail/commodity-detail?productId="+i.pid+"&sk="+i.sk}):Modal({title:"提示",content:"请下载找靓机app",cancelButton:!1,confirmText:"知道了"})}},gotoAct(t,e){var i={page_id:10049,theme__id:t.id,theme__name:t.name,activity_id:this.activityId,operation_index:e+1,event_type:"click"};this.eventPoint("click_activity_subject_recommend",i);var o="https://frontstatic.zhaoliangji.com/shop/act/activity/activity.html?activity_id="+t.id;window.location.href="zljgo://native_api?type=1&content="+encodeURIComponent(o)},gotoPart(t,e){var i={type:2,pid:t.product_id,pic:t.main_pic},o={page_id:10049,pat_sku_id:t.product_id,operation_index:e+1,pat_sku_name:t.product_name,event_type:"click"},a={activity_id:this.activity_id,activity_name:document.title,goods_id:t.product_id,goods_name:t.product_name,is_promotion:0,business_type:"1",event_type:"click"};window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.gotoPage?(this.shencePoint("click_enter_goods_details",a),this.eventPoint("click_activity_accessories",o),window.webkit.messageHandlers.gotoPage.postMessage(i)):window.control&&window.control.gotoPage?(this.shencePoint("click_enter_goods_details",a),this.eventPoint("click_activity_accessories",o),window.control.gotoPage(JSON.stringify(i))):Modal({title:"提示",content:"请下载找靓机app",cancelButton:!1,confirmText:"知道了"})},gotoPartList(){var t={activity_id:this.activity_id,activity_name:document.title,operation_module:"查看更多",operation_area:"10049.1",event_type:"click"};this.shencePoint("click_app",t),window.location.href="zljgo://native_api?type=14&content="+encodeURIComponent('{"categoryId":"19"}')},loadMore(){var t={page_id:10049,activity_id:this.activityId,activity_name:document.title,event_type:"click"};this.eventPoint("click_activity_show_more",t),this.listQuery.page=this.listQuery.page+1,this.getProductData()},tabControlHandle(){var t=this;window.onscroll=function(){var e=document.documentElement.scrollTop||document.body.scrollTop;e>=document.getElementById("tab-wrapper").offsetTop+188?t.isFixed=!0:t.isFixed=!1,t.isHideTop=!(e>200)}},openCustomerService(){window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.goContactIM?window.webkit.messageHandlers.goContactIM.postMessage({}):window.control&&window.control.goContactIM?window.control.goContactIM():window.open("https://zhaoliangji.qiyukf.com/client?k=2ccdb2756aad2cafdc96c1351b4e71ec&wp=1","service"),this.eventPoint("click_online_customer_service",{page_id:10049,activity_id:this.activityId,activity_name:document.title,event_type:"click"}),this.shencePoint("click_online_customer_service",{activity_id:this.activityId,activity_name:document.title,event_type:"click"})},gotoTop(){window.scroll(0,0)},getQueryString(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.slice(1).match(e);return null!=i?unescape(i[2]):null},eventPoint(t,e){this.gid&&(e.group_id=this.gid),ta.track(t,e)},shencePoint(t,e){this.gid&&(e.group_id=[this.gid]),console.log(sensors,"神策sdk"),sensors.track(t,e)},openBodyScroll(){window.lockMaskScrollTop=document.scrollingElement.scrollTop||document.body.scrollTop,document.body.classList.add("overflow-hidden"),document.body.style.top=-window.lockMaskScrollTop+"px"},closeBodyScroll(){document.body.classList.contains("overflow-hidden")&&(document.body.classList.remove("overflow-hidden"),document.scrollingElement.scrollTop=window.lockMaskScrollTop)}}})},function(t,e){!function(t){if(void 0!==window.sensorsDataAnalytic201505)return!1;window.sensorsDataAnalytic201505=t.name,window[t.name]={para:t}}({name:"sensors",server_url:"http://shencedatareport.zhaoliangji.com/sa?project=production",use_app_track:!0,heatmap:{clickmap:"not_collect",scroll_notice_map:"not_collect"}})},function(t,e){!function(t){var e=t.sdk_url,i=t.name,o=window,a=document,n="script",s=null,c=null;if(void 0!==o.sensorsDataAnalytic201505)return!1;o.sensorsDataAnalytic201505=i,o[i]=o[i]||function(t){return function(){(o[i]._q=o[i]._q||[]).push([t,arguments])}};for(var r=["track","quick","register","registerPage","registerOnce","trackSignup","trackAbtest","setProfile","setOnceProfile","appendProfile","incrementProfile","deleteProfile","unsetProfile","identify","login","logout","trackLink","clearAllRegister"],d=0;d<r.length;d++)o[i][r[d]]=o[i].call(null,r[d]);o[i]._t||(s=a.createElement(n),c=a.getElementsByTagName(n)[0],s.async=1,s.src=e,o[i].para=t,c.parentNode.insertBefore(s,c))}({sdk_url:"https://frontstatic.zhaoliangji.com/static/js/shence/sensorsdata.min.js",name:"sensors",server_url:"http://shencedatareport.zhaoliangji.com/sa?project=production",use_app_track:!0,heatmap:{clickmap:"not_collect",scroll_notice_map:"not_collect"}}),sensors.registerPage({page_id:10049,channel_id:1})},function(t,e){!function(t){var e=t.sdkUrl,i=t.name,o=window,a=document,n="script",s=null,c=null;o.ThinkingDataAnalyticalTool=i,o[i]=o[i]||function(t){return function(){(o[i]._q=o[i]._q||[]).push([t,arguments])}};for(var r=["track","quick","login","logout","trackLink","userSet","userSetOnce","userAdd","userDel","setPageProperty"],d=0;d<r.length;d++)o[i][r[d]]=o[i].call(null,r[d]);o[i]._t||(s=a.createElement(n),c=a.getElementsByTagName(n)[0],s.async=1,s.src=e,c.parentNode.insertBefore(s,c),o[i].param=t)}({appId:"29c58f5cfb524250badc849f4ebf1cf9",name:"ta",sdkUrl:"https://panda.huodao.hk/admin/js/h5/thinkingdata.js",serverUrl:"http://datareport.zhaoliangji.com/sync_js",send_method:"image",useAppTrack:!0,showLog:!1})}]);